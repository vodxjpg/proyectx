"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var better_auth_cookies__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! better-auth/cookies */ \"(middleware)/./node_modules/better-auth/dist/cookies/index.mjs\");\n// /home/zodx/Desktop/proyectx/middleware.ts\n\n\n/**\n * IMPORTANT:\n * - We no longer check membership or activeOrganizationId here.\n * - We ONLY verify that the user has a valid session if they attempt\n *   to access private routes.\n */ async function middleware(request) {\n    const { pathname } = request.nextUrl;\n    console.log(\"Middleware: requested pathname\", pathname);\n    // 1) Allow _next, static assets, and files\n    if (pathname.startsWith(\"/_next\") || pathname.startsWith(\"/static\") || pathname.includes(\".\")) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // 2) Define public routes\n    const publicRoutes = [\n        \"/\",\n        \"/login\",\n        \"/signup\",\n        \"/forgot-password\",\n        \"/reset-password\",\n        \"/about-us\",\n        \"/api/auth\",\n        \"/api/auth/reset-password\",\n        \"/admin/login\",\n        \"/accept\",\n        \"/set-password\",\n        \"/accept-invitation\",\n        \"/accept-invite\",\n        \"/api/check-user\",\n        \"/api/create-user\",\n        \"/invite\",\n        \"/api/invite\",\n        \"/check-email\"\n    ];\n    // 3) Define allowed routes\n    const allowedRoutes = [\n        ...publicRoutes,\n        \"/onboarding/organization\",\n        \"/onboarding/bot-keys\",\n        \"/onboarding/support-email\",\n        \"/onboarding/secret-phrase\",\n        \"/settings\",\n        \"/select-organization\"\n    ];\n    const isAllowed = allowedRoutes.some((route)=>pathname === route || pathname.startsWith(route + \"/\"));\n    console.log(`Middleware: Is ${pathname} allowed? ${isAllowed}`);\n    if (isAllowed) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // 4) For internal API endpoints, check x-internal-token\n    if (pathname.startsWith(\"/api/internal\")) {\n        const token = request.headers.get(\"x-internal-token\");\n        // IMPORTANT: must match NEXT_PUBLIC_INTERNAL_TOKEN\n        if (token !== \"Zx1pa3f6OEI02rxQFMaMDOpVM7VVtSkaa\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 403\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // 5) Admin route check (example)\n    if (pathname.startsWith(\"/admin\") && pathname !== \"/admin/login\") {\n        const sessionRes = await fetch(new URL(\"/api/auth/get-session\", request.url), {\n            headers: {\n                cookie: request.headers.get(\"cookie\") || \"\"\n            }\n        });\n        if (!sessionRes.ok) {\n            console.log(`Middleware: Redirecting to /admin/login from ${pathname}`);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/admin/login\", request.url));\n        }\n        const sessionData = await sessionRes.json();\n        if (!sessionData || !sessionData.user || sessionData.user.role !== \"admin\" && sessionData.user.role !== \"superAdmin\") {\n            console.log(`Middleware: Unauthorized admin access to ${pathname}`);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/admin/login\", request.url));\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // 6) All other routes: must have a session cookie\n    const sessionCookie = (0,better_auth_cookies__WEBPACK_IMPORTED_MODULE_1__.getSessionCookie)(request);\n    if (!sessionCookie) {\n        console.log(`Middleware: No session cookie, redirecting to /login from ${pathname}`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/login\", request.url));\n    }\n    // 7) Validate the session\n    const sessionRes = await fetch(new URL(\"/api/auth/get-session\", request.url), {\n        headers: {\n            cookie: request.headers.get(\"cookie\") || \"\"\n        }\n    });\n    if (!sessionRes.ok) {\n        console.log(`Middleware: Invalid session, redirecting to /login from ${pathname}`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/login\", request.url));\n    }\n    // 8) If session is valid, let user proceed\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n}\nconst config = {\n    matcher: \"/:path*\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsNENBQTRDO0FBQ1k7QUFDRDtBQUV2RDs7Ozs7Q0FLQyxHQUNNLGVBQWVFLFdBQVdDLE9BQW9CO0lBQ25ELE1BQU0sRUFBRUMsUUFBUSxFQUFFLEdBQUdELFFBQVFFLE9BQU87SUFFcENDLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBa0NIO0lBRTlDLDJDQUEyQztJQUMzQyxJQUNFQSxTQUFTSSxVQUFVLENBQUMsYUFDcEJKLFNBQVNJLFVBQVUsQ0FBQyxjQUNwQkosU0FBU0ssUUFBUSxDQUFDLE1BQ2xCO1FBQ0EsT0FBT1QscURBQVlBLENBQUNVLElBQUk7SUFDMUI7SUFFQSwwQkFBMEI7SUFDMUIsTUFBTUMsZUFBZTtRQUNuQjtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7S0FDRDtJQUVELDJCQUEyQjtJQUMzQixNQUFNQyxnQkFBZ0I7V0FDakJEO1FBQ0g7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBR0Q7SUFFRCxNQUFNRSxZQUFZRCxjQUFjRSxJQUFJLENBQ2xDLENBQUNDLFFBQVVYLGFBQWFXLFNBQVNYLFNBQVNJLFVBQVUsQ0FBQ08sUUFBUTtJQUcvRFQsUUFBUUMsR0FBRyxDQUFDLENBQUMsZUFBZSxFQUFFSCxTQUFTLFVBQVUsRUFBRVMsVUFBVSxDQUFDO0lBQzlELElBQUlBLFdBQVc7UUFDYixPQUFPYixxREFBWUEsQ0FBQ1UsSUFBSTtJQUMxQjtJQUVBLHdEQUF3RDtJQUN4RCxJQUFJTixTQUFTSSxVQUFVLENBQUMsa0JBQWtCO1FBQ3hDLE1BQU1RLFFBQVFiLFFBQVFjLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO1FBQ2xDLG1EQUFtRDtRQUNuRCxJQUFJRixVQUFVRyxtQ0FBc0MsRUFBRTtZQUNwRCxPQUFPbkIscURBQVlBLENBQUNzQixJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBZSxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDcEU7UUFDQSxPQUFPeEIscURBQVlBLENBQUNVLElBQUk7SUFDMUI7SUFFQSxpQ0FBaUM7SUFDakMsSUFBSU4sU0FBU0ksVUFBVSxDQUFDLGFBQWFKLGFBQWEsZ0JBQWdCO1FBQ2hFLE1BQU1xQixhQUFhLE1BQU1DLE1BQU0sSUFBSUMsSUFBSSx5QkFBeUJ4QixRQUFReUIsR0FBRyxHQUFHO1lBQzVFWCxTQUFTO2dCQUNQWSxRQUFRMUIsUUFBUWMsT0FBTyxDQUFDQyxHQUFHLENBQUMsYUFBYTtZQUMzQztRQUNGO1FBQ0EsSUFBSSxDQUFDTyxXQUFXSyxFQUFFLEVBQUU7WUFDbEJ4QixRQUFRQyxHQUFHLENBQUMsQ0FBQyw2Q0FBNkMsRUFBRUgsU0FBUyxDQUFDO1lBQ3RFLE9BQU9KLHFEQUFZQSxDQUFDK0IsUUFBUSxDQUFDLElBQUlKLElBQUksZ0JBQWdCeEIsUUFBUXlCLEdBQUc7UUFDbEU7UUFDQSxNQUFNSSxjQUFjLE1BQU1QLFdBQVdILElBQUk7UUFDekMsSUFDRSxDQUFDVSxlQUNELENBQUNBLFlBQVlDLElBQUksSUFDaEJELFlBQVlDLElBQUksQ0FBQ0MsSUFBSSxLQUFLLFdBQVdGLFlBQVlDLElBQUksQ0FBQ0MsSUFBSSxLQUFLLGNBQ2hFO1lBQ0E1QixRQUFRQyxHQUFHLENBQUMsQ0FBQyx5Q0FBeUMsRUFBRUgsU0FBUyxDQUFDO1lBQ2xFLE9BQU9KLHFEQUFZQSxDQUFDK0IsUUFBUSxDQUFDLElBQUlKLElBQUksZ0JBQWdCeEIsUUFBUXlCLEdBQUc7UUFDbEU7UUFDQSxPQUFPNUIscURBQVlBLENBQUNVLElBQUk7SUFDMUI7SUFFQSxrREFBa0Q7SUFDbEQsTUFBTXlCLGdCQUFnQmxDLHFFQUFnQkEsQ0FBQ0U7SUFDdkMsSUFBSSxDQUFDZ0MsZUFBZTtRQUNsQjdCLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDBEQUEwRCxFQUFFSCxTQUFTLENBQUM7UUFDbkYsT0FBT0oscURBQVlBLENBQUMrQixRQUFRLENBQUMsSUFBSUosSUFBSSxVQUFVeEIsUUFBUXlCLEdBQUc7SUFDNUQ7SUFFQSwwQkFBMEI7SUFDMUIsTUFBTUgsYUFBYSxNQUFNQyxNQUFNLElBQUlDLElBQUkseUJBQXlCeEIsUUFBUXlCLEdBQUcsR0FBRztRQUM1RVgsU0FBUztZQUNQWSxRQUFRMUIsUUFBUWMsT0FBTyxDQUFDQyxHQUFHLENBQUMsYUFBYTtRQUMzQztJQUNGO0lBQ0EsSUFBSSxDQUFDTyxXQUFXSyxFQUFFLEVBQUU7UUFDbEJ4QixRQUFRQyxHQUFHLENBQUMsQ0FBQyx3REFBd0QsRUFBRUgsU0FBUyxDQUFDO1FBQ2pGLE9BQU9KLHFEQUFZQSxDQUFDK0IsUUFBUSxDQUFDLElBQUlKLElBQUksVUFBVXhCLFFBQVF5QixHQUFHO0lBQzVEO0lBRUEsMkNBQTJDO0lBQzNDLE9BQU81QixxREFBWUEsQ0FBQ1UsSUFBSTtBQUMxQjtBQUVPLE1BQU0wQixTQUFTO0lBQ3BCQyxTQUFTO0FBQ1gsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9taWRkbGV3YXJlLnRzPzQyMmQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gL2hvbWUvem9keC9EZXNrdG9wL3Byb3llY3R4L21pZGRsZXdhcmUudHNcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGdldFNlc3Npb25Db29raWUgfSBmcm9tIFwiYmV0dGVyLWF1dGgvY29va2llc1wiO1xuXG4vKipcbiAqIElNUE9SVEFOVDpcbiAqIC0gV2Ugbm8gbG9uZ2VyIGNoZWNrIG1lbWJlcnNoaXAgb3IgYWN0aXZlT3JnYW5pemF0aW9uSWQgaGVyZS5cbiAqIC0gV2UgT05MWSB2ZXJpZnkgdGhhdCB0aGUgdXNlciBoYXMgYSB2YWxpZCBzZXNzaW9uIGlmIHRoZXkgYXR0ZW1wdFxuICogICB0byBhY2Nlc3MgcHJpdmF0ZSByb3V0ZXMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IHsgcGF0aG5hbWUgfSA9IHJlcXVlc3QubmV4dFVybDtcblxuICBjb25zb2xlLmxvZyhcIk1pZGRsZXdhcmU6IHJlcXVlc3RlZCBwYXRobmFtZVwiLCBwYXRobmFtZSk7XG5cbiAgLy8gMSkgQWxsb3cgX25leHQsIHN0YXRpYyBhc3NldHMsIGFuZCBmaWxlc1xuICBpZiAoXG4gICAgcGF0aG5hbWUuc3RhcnRzV2l0aChcIi9fbmV4dFwiKSB8fFxuICAgIHBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvc3RhdGljXCIpIHx8XG4gICAgcGF0aG5hbWUuaW5jbHVkZXMoXCIuXCIpXG4gICkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpO1xuICB9XG5cbiAgLy8gMikgRGVmaW5lIHB1YmxpYyByb3V0ZXNcbiAgY29uc3QgcHVibGljUm91dGVzID0gW1xuICAgIFwiL1wiLFxuICAgIFwiL2xvZ2luXCIsXG4gICAgXCIvc2lnbnVwXCIsXG4gICAgXCIvZm9yZ290LXBhc3N3b3JkXCIsXG4gICAgXCIvcmVzZXQtcGFzc3dvcmRcIixcbiAgICBcIi9hYm91dC11c1wiLFxuICAgIFwiL2FwaS9hdXRoXCIsXG4gICAgXCIvYXBpL2F1dGgvcmVzZXQtcGFzc3dvcmRcIixcbiAgICBcIi9hZG1pbi9sb2dpblwiLFxuICAgIFwiL2FjY2VwdFwiLCAgICAgICAgICAgICAvLyBGb3IgL2FjY2VwdC9baW52aXRhdGlvbklkXVxuICAgIFwiL3NldC1wYXNzd29yZFwiLCAgICAgICAvLyBGb3IgbmV3IHVzZXJzIHRvIHNldCB0aGVpciBwYXNzd29yZFxuICAgIFwiL2FjY2VwdC1pbnZpdGF0aW9uXCIsICAvLyBDb3ZlcnMgL2FjY2VwdC1pbnZpdGF0aW9uL1tpbnZpdGF0aW9uSWRdXG4gICAgXCIvYWNjZXB0LWludml0ZVwiLCAgICAgIC8vIENvbmZpcm1hdGlvbiBwYWdlXG4gICAgXCIvYXBpL2NoZWNrLXVzZXJcIiwgICAgIC8vIEFQSSB0byBjaGVjayBpZiB1c2VyIGV4aXN0c1xuICAgIFwiL2FwaS9jcmVhdGUtdXNlclwiLCAgICAvLyBBUEkgdG8gY3JlYXRlIHVzZXJzXG4gICAgXCIvaW52aXRlXCIsICAgICAgICAgICAgIC8vIENvdmVycyAvaW52aXRlL1tpbnZpdGF0aW9uSWRdXG4gICAgXCIvYXBpL2ludml0ZVwiLFxuICAgIFwiL2NoZWNrLWVtYWlsXCIsXG4gIF07XG5cbiAgLy8gMykgRGVmaW5lIGFsbG93ZWQgcm91dGVzXG4gIGNvbnN0IGFsbG93ZWRSb3V0ZXMgPSBbXG4gICAgLi4ucHVibGljUm91dGVzLFxuICAgIFwiL29uYm9hcmRpbmcvb3JnYW5pemF0aW9uXCIsXG4gICAgXCIvb25ib2FyZGluZy9ib3Qta2V5c1wiLFxuICAgIFwiL29uYm9hcmRpbmcvc3VwcG9ydC1lbWFpbFwiLFxuICAgIFwiL29uYm9hcmRpbmcvc2VjcmV0LXBocmFzZVwiLFxuICAgIFwiL3NldHRpbmdzXCIsXG4gICAgXCIvc2VsZWN0LW9yZ2FuaXphdGlvblwiLFxuICAgIC8vIE5PVEU6IFJlbW92ZSBcIi9kYXNoYm9hcmRcIiBmcm9tIGhlcmU6XG4gICAgLy8gXCIvZGFzaGJvYXJkXCJcbiAgXTtcblxuICBjb25zdCBpc0FsbG93ZWQgPSBhbGxvd2VkUm91dGVzLnNvbWUoXG4gICAgKHJvdXRlKSA9PiBwYXRobmFtZSA9PT0gcm91dGUgfHwgcGF0aG5hbWUuc3RhcnRzV2l0aChyb3V0ZSArIFwiL1wiKVxuICApO1xuXG4gIGNvbnNvbGUubG9nKGBNaWRkbGV3YXJlOiBJcyAke3BhdGhuYW1lfSBhbGxvd2VkPyAke2lzQWxsb3dlZH1gKTtcbiAgaWYgKGlzQWxsb3dlZCkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpO1xuICB9XG5cbiAgLy8gNCkgRm9yIGludGVybmFsIEFQSSBlbmRwb2ludHMsIGNoZWNrIHgtaW50ZXJuYWwtdG9rZW5cbiAgaWYgKHBhdGhuYW1lLnN0YXJ0c1dpdGgoXCIvYXBpL2ludGVybmFsXCIpKSB7XG4gICAgY29uc3QgdG9rZW4gPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwieC1pbnRlcm5hbC10b2tlblwiKTtcbiAgICAvLyBJTVBPUlRBTlQ6IG11c3QgbWF0Y2ggTkVYVF9QVUJMSUNfSU5URVJOQUxfVE9LRU5cbiAgICBpZiAodG9rZW4gIT09IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0lOVEVSTkFMX1RPS0VOKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9LCB7IHN0YXR1czogNDAzIH0pO1xuICAgIH1cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcbiAgfVxuXG4gIC8vIDUpIEFkbWluIHJvdXRlIGNoZWNrIChleGFtcGxlKVxuICBpZiAocGF0aG5hbWUuc3RhcnRzV2l0aChcIi9hZG1pblwiKSAmJiBwYXRobmFtZSAhPT0gXCIvYWRtaW4vbG9naW5cIikge1xuICAgIGNvbnN0IHNlc3Npb25SZXMgPSBhd2FpdCBmZXRjaChuZXcgVVJMKFwiL2FwaS9hdXRoL2dldC1zZXNzaW9uXCIsIHJlcXVlc3QudXJsKSwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBjb29raWU6IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJjb29raWVcIikgfHwgXCJcIixcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgaWYgKCFzZXNzaW9uUmVzLm9rKSB7XG4gICAgICBjb25zb2xlLmxvZyhgTWlkZGxld2FyZTogUmVkaXJlY3RpbmcgdG8gL2FkbWluL2xvZ2luIGZyb20gJHtwYXRobmFtZX1gKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTChcIi9hZG1pbi9sb2dpblwiLCByZXF1ZXN0LnVybCkpO1xuICAgIH1cbiAgICBjb25zdCBzZXNzaW9uRGF0YSA9IGF3YWl0IHNlc3Npb25SZXMuanNvbigpO1xuICAgIGlmIChcbiAgICAgICFzZXNzaW9uRGF0YSB8fFxuICAgICAgIXNlc3Npb25EYXRhLnVzZXIgfHxcbiAgICAgIChzZXNzaW9uRGF0YS51c2VyLnJvbGUgIT09IFwiYWRtaW5cIiAmJiBzZXNzaW9uRGF0YS51c2VyLnJvbGUgIT09IFwic3VwZXJBZG1pblwiKVxuICAgICkge1xuICAgICAgY29uc29sZS5sb2coYE1pZGRsZXdhcmU6IFVuYXV0aG9yaXplZCBhZG1pbiBhY2Nlc3MgdG8gJHtwYXRobmFtZX1gKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTChcIi9hZG1pbi9sb2dpblwiLCByZXF1ZXN0LnVybCkpO1xuICAgIH1cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcbiAgfVxuXG4gIC8vIDYpIEFsbCBvdGhlciByb3V0ZXM6IG11c3QgaGF2ZSBhIHNlc3Npb24gY29va2llXG4gIGNvbnN0IHNlc3Npb25Db29raWUgPSBnZXRTZXNzaW9uQ29va2llKHJlcXVlc3QpO1xuICBpZiAoIXNlc3Npb25Db29raWUpIHtcbiAgICBjb25zb2xlLmxvZyhgTWlkZGxld2FyZTogTm8gc2Vzc2lvbiBjb29raWUsIHJlZGlyZWN0aW5nIHRvIC9sb2dpbiBmcm9tICR7cGF0aG5hbWV9YCk7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKFwiL2xvZ2luXCIsIHJlcXVlc3QudXJsKSk7XG4gIH1cblxuICAvLyA3KSBWYWxpZGF0ZSB0aGUgc2Vzc2lvblxuICBjb25zdCBzZXNzaW9uUmVzID0gYXdhaXQgZmV0Y2gobmV3IFVSTChcIi9hcGkvYXV0aC9nZXQtc2Vzc2lvblwiLCByZXF1ZXN0LnVybCksIHtcbiAgICBoZWFkZXJzOiB7XG4gICAgICBjb29raWU6IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJjb29raWVcIikgfHwgXCJcIixcbiAgICB9LFxuICB9KTtcbiAgaWYgKCFzZXNzaW9uUmVzLm9rKSB7XG4gICAgY29uc29sZS5sb2coYE1pZGRsZXdhcmU6IEludmFsaWQgc2Vzc2lvbiwgcmVkaXJlY3RpbmcgdG8gL2xvZ2luIGZyb20gJHtwYXRobmFtZX1gKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoXCIvbG9naW5cIiwgcmVxdWVzdC51cmwpKTtcbiAgfVxuXG4gIC8vIDgpIElmIHNlc3Npb24gaXMgdmFsaWQsIGxldCB1c2VyIHByb2NlZWRcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KCk7XG59XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIG1hdGNoZXI6IFwiLzpwYXRoKlwiLCAvLyBBcHBseSBtaWRkbGV3YXJlIHRvIGFsbCByb3V0ZXNcbn07XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0U2Vzc2lvbkNvb2tpZSIsIm1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwicGF0aG5hbWUiLCJuZXh0VXJsIiwiY29uc29sZSIsImxvZyIsInN0YXJ0c1dpdGgiLCJpbmNsdWRlcyIsIm5leHQiLCJwdWJsaWNSb3V0ZXMiLCJhbGxvd2VkUm91dGVzIiwiaXNBbGxvd2VkIiwic29tZSIsInJvdXRlIiwidG9rZW4iLCJoZWFkZXJzIiwiZ2V0IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0lOVEVSTkFMX1RPS0VOIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwic2Vzc2lvblJlcyIsImZldGNoIiwiVVJMIiwidXJsIiwiY29va2llIiwib2siLCJyZWRpcmVjdCIsInNlc3Npb25EYXRhIiwidXNlciIsInJvbGUiLCJzZXNzaW9uQ29va2llIiwiY29uZmlnIiwibWF0Y2hlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});